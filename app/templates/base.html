<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link 
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" 
            rel="stylesheet" 
            integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" 
            crossorigin="anonymous">
        <link href="https://getbootstrap.com/docs/5.3/assets/css/docs.css" rel="stylesheet">
        <script 
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" 
            integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" 
            crossorigin="anonymous">
        </script>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <title>{% block title %}Home{% endblock %}</title>
    </head>
    <body>
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top">
            <div class="container">
                <a class="navbar-brand" href="/">Student Information System</a>
                <button 
                    class="navbar-toggler" 
                    type="button" 
                    data-bs-toggle="collapse" 
                    data-bs-target="#navbarNav" 
                    aria-controls="navbarNav" 
                    aria-expanded="false" 
                    aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav">
                        <li class="nav-item">
                            <a class="nav-link {% if request.path == '/students' %}active{% endif %}" href="/students">Students</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link {% if request.path == '/courses' %}active{% endif %}" href="/courses">Courses</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link {% if request.path == '/colleges' %}active{% endif %}" href="/colleges">Colleges</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
        <div class="container">
            {% if request.path != '/' %}
            <nav class="navbar navbar-expand-lg navbar-dark mt-3" style="background-color: #54595E; border-radius: 10px;">
                <div class="container">
                    <a class="navbar-brand">{% block page%}{% endblock %}</a>
                    <ul class="navbar-nav me-auto">
                        <li class="nav-item">
                            <input class="form-control" type="text" id="search-input" placeholder="Search">
                        </li>
                    </ul>
                    <ul class="navbar-nav">
                        <li class="nav-item">
                            {% block create %}{% endblock %} 
                        </li>
                    </ul>
                </div>
            </nav>            
            {% endif %}
        
            {% block content %}
            {% endblock %}
        </div> 
        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
            integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
            crossorigin="anonymous"
        ></script>
        <script
            src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
            integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
            crossorigin="anonymous"
        ></script> 
        <script>
            // Use JavaScript or jQuery to hide the CSRF token field
            $(document).ready(function() {
                // Hide the CSRF token field
                $("input[name='csrf_token']").hide();
            });
            $(document).ready(function() {
                // Listen for changes in the search input field
                $("#search-input").on("input", function() {
                    var searchText = $(this).val().toLowerCase();

                    // Loop through table rows and hide those that don't match the search text
                    $(".highlightable-row").each(function() {
                        // Get all td elements except the last one
                        var tdsToSearch = $(this).find('td:not(:last-child)');
                        
                        // Concatenate the text content of each td
                        var rowText = tdsToSearch.map(function() {
                            return $(this).text().toLowerCase();
                        }).get().join(' ');

                        // Check if the rowText contains the search text
                        if (rowText.indexOf(searchText) === -1) {
                            $(this).hide();
                        } else {
                            $(this).show();
                        }
                    });
                });
            });
          </script>
    </body>
</html>